<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="GroceryOrderingApp.Mobile.Views.AdminDashboardPage"
             Title="Admin Dashboard"
             BackgroundColor="{StaticResource BackgroundColor}">
    
    <Grid RowDefinitions="Auto,*,Auto" VerticalOptions="FillAndExpand">
        
        <!-- Header -->
        <StackLayout Grid.Row="0" BackgroundColor="{StaticResource Primary}" Padding="20" Spacing="8">
            <Label Text="ðŸ¢ Admin Dashboard" Style="{StaticResource HeadlineStyle}" 
                   TextColor="White" HorizontalTextAlignment="Center"/>
            <Label Text="Manage products, categories, and orders" 
                   FontSize="12" TextColor="{StaticResource TextSecondary}" 
                   HorizontalTextAlignment="Center"/>
        </StackLayout>
        
        <!-- Loading Indicator -->
        <ActivityIndicator Grid.Row="1" 
                          IsRunning="{Binding IsLoading}" 
                          IsVisible="{Binding IsLoading}"
                          Color="{StaticResource Primary}"
                          Scale="1.8"
                          VerticalOptions="Center"/>
        
        <!-- Dashboard Stats -->
        <ScrollView Grid.Row="1" 
                   IsVisible="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}"
                   VerticalOptions="FillAndExpand">
            <VerticalStackLayout Padding="16" Spacing="16">
                
                <!-- Stats Cards Grid -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="12" RowSpacing="12">
                    
                    <!-- Total Orders Card -->
                    <Frame Grid.Row="0" Grid.Column="0"
                          Style="{StaticResource CardStyle}"
                          BorderColor="{StaticResource Primary}"
                          HasShadow="True">
                        <VerticalStackLayout Spacing="8" Padding="0">
                            <Label Text="ðŸ“¦" FontSize="32" HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding TotalOrders}" 
                                  FontSize="24" FontAttributes="Bold"
                                  TextColor="{StaticResource Primary}"
                                  HorizontalTextAlignment="Center"/>
                            <Label Text="Total Orders" 
                                  FontSize="12" TextColor="{StaticResource TextSecondary}"
                                  HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                    </Frame>
                    
                    <!-- Pending Orders Card -->
                    <Frame Grid.Row="0" Grid.Column="1"
                          Style="{StaticResource CardStyle}"
                          BorderColor="{StaticResource Warning}"
                          HasShadow="True">
                        <VerticalStackLayout Spacing="8" Padding="0">
                            <Label Text="â³" FontSize="32" HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding PendingOrders}" 
                                  FontSize="24" FontAttributes="Bold"
                                  TextColor="{StaticResource Warning}"
                                  HorizontalTextAlignment="Center"/>
                            <Label Text="Pending" 
                                  FontSize="12" TextColor="{StaticResource TextSecondary}"
                                  HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                    </Frame>
                    
                    <!-- Total Revenue Card -->
                    <Frame Grid.Row="1" Grid.Column="0"
                          Style="{StaticResource CardStyle}"
                          BorderColor="{StaticResource Success}"
                          HasShadow="True">
                        <VerticalStackLayout Spacing="8" Padding="0">
                            <Label Text="ðŸ’°" FontSize="32" HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding TotalRevenue, StringFormat='â‚¹{0:F0}'}" 
                                  FontSize="20" FontAttributes="Bold"
                                  TextColor="{StaticResource Success}"
                                  HorizontalTextAlignment="Center"/>
                            <Label Text="Revenue" 
                                  FontSize="12" TextColor="{StaticResource TextSecondary}"
                                  HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                    </Frame>
                    
                    <!-- Total Products Card -->
                    <Frame Grid.Row="1" Grid.Column="1"
                          Style="{StaticResource CardStyle}"
                          BorderColor="{StaticResource Secondary}"
                          HasShadow="True">
                        <VerticalStackLayout Spacing="8" Padding="0">
                            <Label Text="ðŸ¥¬" FontSize="32" HorizontalTextAlignment="Center"/>
                            <Label Text="{Binding TotalProducts}" 
                                  FontSize="24" FontAttributes="Bold"
                                  TextColor="{StaticResource Secondary}"
                                  HorizontalTextAlignment="Center"/>
                            <Label Text="Products" 
                                  FontSize="12" TextColor="{StaticResource TextSecondary}"
                                  HorizontalTextAlignment="Center"/>
                        </VerticalStackLayout>
                    </Frame>
                </Grid>
                
                <BoxView HeightRequest="1" BackgroundColor="{StaticResource TextHint}"/>
                
                <!-- Management Cards -->
                <Label Text="Management" FontSize="14" FontAttributes="Bold" TextColor="{StaticResource TextPrimary}"/>
                
                <Frame Style="{StaticResource CardStyle}" BorderColor="{StaticResource Primary}" HasShadow="True">
                    <Button Text="ðŸ“‹ Manage Orders" 
                           Style="{StaticResource PrimaryButtonStyle}"
                           FontSize="14"
                           Padding="12"
                           Clicked="OnManageOrders"/>
                </Frame>
                
                <Frame Style="{StaticResource CardStyle}" BorderColor="{StaticResource Secondary}" HasShadow="True">
                    <Button Text="ðŸ¥¬ Manage Products" 
                           Style="{StaticResource PrimaryButtonStyle}"
                           FontSize="14"
                           Padding="12"
                           Clicked="OnManageProducts"/>
                </Frame>
                
                <Frame Style="{StaticResource CardStyle}" BorderColor="{StaticResource Primary}" HasShadow="True">
                    <Button Text="ðŸ“‚ Manage Categories" 
                           Style="{StaticResource PrimaryButtonStyle}"
                           FontSize="14"
                           Padding="12"
                           Clicked="OnManageCategories"/>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>
        
        <!-- Error Message -->
        <Label Grid.Row="1"
               Text="{Binding ErrorMessage}"
               TextColor="{StaticResource Error}"
               FontSize="14"
               LineBreakMode="WordWrap"
               Padding="20"
               HorizontalTextAlignment="Center"
               VerticalOptions="Center"
               IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBool}}"/>
        
        <!-- Logout Button -->
        <Frame Grid.Row="2"
               BorderColor="{StaticResource Error}"
               HasShadow="True"
               Padding="12"
               CornerRadius="8"
               Margin="12,0,12,12">
            <Button Text="ðŸšª Logout"
                   Style="{StaticResource DangerButtonStyle}"
                   FontSize="14"
                   Padding="12"
                   Command="{Binding LogoutCommand}"/>
        </Frame>
    </Grid>
    
</ContentPage>
