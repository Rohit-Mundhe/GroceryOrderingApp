<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="GroceryOrderingApp.Mobile.Views.CustomerCategoryPage"
             Title="Categories"
             BackgroundColor="{StaticResource BackgroundColor}">
    
    <Grid RowDefinitions="Auto,*,Auto" VerticalOptions="FillAndExpand">
        
        <!-- Header -->
        <StackLayout Grid.Row="0" BackgroundColor="{StaticResource Primary}" Padding="20" Spacing="0">
            <Label Text="ðŸ›’ Shop by Category" Style="{StaticResource HeadlineStyle}" 
                   TextColor="White" HorizontalTextAlignment="Center"/>
            <Label Text="Browse our fresh products organized by category" 
                   FontSize="12" TextColor="{StaticResource TextSecondary}" 
                   HorizontalTextAlignment="Center" Margin="0,8,0,0"/>
        </StackLayout>
        
        <!-- Loading Indicator -->
        <ActivityIndicator Grid.Row="1" 
                          IsRunning="{Binding IsLoading}" 
                          IsVisible="{Binding IsLoading}"
                          Color="{StaticResource Primary}"
                          Scale="1.8"
                          VerticalOptions="Center"/>
        
        <!-- Categories Grid -->
        <CollectionView Grid.Row="1" 
                       ItemsSource="{Binding Categories}"
                       Padding="12"
                       VerticalOptions="FillAndExpand"
                       IsVisible="{Binding IsLoading, Converter={StaticResource InvertedBoolConverter}}">
            <CollectionView.ItemsLayout>
                <GridItemsLayout Orientation="Vertical" 
                                HorizontalItemSpacing="12" 
                                VerticalItemSpacing="12" 
                                Columns="2"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Style="{StaticResource CardStyle}" 
                           HasShadow="True" 
                           BorderColor="{StaticResource Primary}"
                           Padding="0">
                        <Grid RowDefinitions="*,Auto" Padding="12">
                            <!-- Category Icon & Name -->
                            <StackLayout Grid.Row="0" Spacing="8" VerticalOptions="Center" HorizontalOptions="Center">
                                <Label Text="ðŸ“¦" FontSize="32" HorizontalTextAlignment="Center"/>
                                <Label Text="{Binding Name}" 
                                       FontSize="14" 
                                       FontAttributes="Bold"
                                       TextColor="{StaticResource TextPrimary}"
                                       LineBreakMode="WordWrap"
                                       HorizontalTextAlignment="Center"/>
                            </StackLayout>
                            
                            <!-- View Products Button -->
                            <Button Grid.Row="1"
                                   Text="View Products â†’"
                                   Style="{StaticResource PrimaryButtonStyle}"
                                   FontSize="12"
                                   Padding="8"
                                   Command="{Binding Source={RelativeSource AncestorType={x:Type ContentPage}}, Path=BindingContext.SelectCategoryCommand}"
                                   CommandParameter="{Binding Id}"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
        
        <!-- Error Message -->
        <Label Grid.Row="1"
               Text="{Binding ErrorMessage}"
               TextColor="{StaticResource Error}"
               FontSize="14"
               LineBreakMode="WordWrap"
               Padding="20"
               HorizontalTextAlignment="Center"
               VerticalOptions="Center"
               IsVisible="{Binding ErrorMessage, Converter={StaticResource StringToBool}}"/>
        
        <!-- Footer -->
        <Label Grid.Row="2"
               Text="Pull to refresh your categories"
               FontSize="11"
               TextColor="{StaticResource TextHint}"
               HorizontalTextAlignment="Center"
               Margin="0,12,0,12"/>
    </Grid>
    
</ContentPage>
